<!DOCTYPE html>
<html lang="en-GB">

<head>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Grammarly iOS Keyboard - Unboxing | Artem Loenko Website</title>
<meta name="title" content="Grammarly iOS Keyboard - Unboxing" />
<meta name="description" content="Grammarly is a lovely writing assistant. Twenty million people use the tool across the globe according to the statistics available on the site. I use it too. No complaints, it does its job quite well, and I am a happy user. The only thing that always worried me is the Grammarly iOS Keyboard. As an iOS engineer, I know how easily you can collect different data, sensitive information, and even do not ask users about the consent. So, let&rsquo;s check what is inside the Grammarly iOS application." />
<meta name="keywords" content="" />


<meta property="og:url" content="http://justsitandgrin.im/grammarly-ios-keyboard-unboxing/">
  <meta property="og:site_name" content="Artem Loenko Website">
  <meta property="og:title" content="Grammarly iOS Keyboard - Unboxing">
  <meta property="og:description" content="Grammarly is a lovely writing assistant. Twenty million people use the tool across the globe according to the statistics available on the site. I use it too. No complaints, it does its job quite well, and I am a happy user. The only thing that always worried me is the Grammarly iOS Keyboard. As an iOS engineer, I know how easily you can collect different data, sensitive information, and even do not ask users about the consent. So, let’s check what is inside the Grammarly iOS application.">
  <meta property="og:locale" content="en_GB">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2020-07-26T16:34:00+01:00">
    <meta property="article:modified_time" content="2020-07-26T16:34:00+01:00">




  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Grammarly iOS Keyboard - Unboxing">
  <meta name="twitter:description" content="Grammarly is a lovely writing assistant. Twenty million people use the tool across the globe according to the statistics available on the site. I use it too. No complaints, it does its job quite well, and I am a happy user. The only thing that always worried me is the Grammarly iOS Keyboard. As an iOS engineer, I know how easily you can collect different data, sensitive information, and even do not ask users about the consent. So, let’s check what is inside the Grammarly iOS application.">




  <meta itemprop="name" content="Grammarly iOS Keyboard - Unboxing">
  <meta itemprop="description" content="Grammarly is a lovely writing assistant. Twenty million people use the tool across the globe according to the statistics available on the site. I use it too. No complaints, it does its job quite well, and I am a happy user. The only thing that always worried me is the Grammarly iOS Keyboard. As an iOS engineer, I know how easily you can collect different data, sensitive information, and even do not ask users about the consent. So, let’s check what is inside the Grammarly iOS application.">
  <meta itemprop="datePublished" content="2020-07-26T16:34:00+01:00">
  <meta itemprop="dateModified" content="2020-07-26T16:34:00+01:00">
  <meta itemprop="wordCount" content="1037">
<meta name="referrer" content="no-referrer-when-downgrade" />

  <style>
  :root {
      --width: 720px;
      --font-main: Verdana, sans-serif;
      --font-secondary: Verdana, sans-serif;
      --font-scale: 1em;
      --background-color: #fff;
      --heading-color: #222;
      --text-color: #444;
      --link-color: #3273dc;
      --visited-color:  #8b6fcb;
      --code-background-color: #f2f2f2;
      --code-color: #222;
      --blockquote-color: #222;
  }

  @media (prefers-color-scheme: dark) {
      :root {
          --background-color: #01242e;
          --heading-color: #eee;
          --text-color: #ddd;
          --link-color: #8cc2dd;
          --visited-color:  #8b6fcb;
          --code-background-color: #000;
          --code-color: #ddd;
          --blockquote-color: #ccc;
      }
  }

  body {
      font-family: var(--font-secondary);
      font-size: var(--font-scale);
      margin: auto;
      padding: 20px;
      max-width: var(--width);
      text-align: left;
      background-color: var(--background-color);
      word-wrap: break-word;
      overflow-wrap: break-word;
      line-height: 1.5;
      color: var(--text-color);
  }

  h1, h2, h3, h4, h5, h6 {
      font-family: var(--font-main);
      color: var(--heading-color);
  }

  a {
      color: var(--link-color);
      cursor: pointer;
      text-decoration: none;
  }

  a:hover {
      text-decoration: underline;
  }

  nav a {
      margin-right: 8px;
  }

  strong, b {
      color: var(--heading-color);
  }

  button {
      margin: 0;
      cursor: pointer;
  }

  time {
   	font-family: monospace;
    	font-style: normal;
    	font-size: 15px;
  }

  main {
      line-height: 1.6;
  }

  table {
      width: 100%;
  }

  hr {
      border: 0;
      border-top: 1px dashed;
  }

  img {
      max-width: 100%;
  }

  code {
      font-family: monospace;
      padding: 2px;
      background-color: var(--code-background-color);
      color: var(--code-color);
      border-radius: 3px;
  }

  blockquote {
      border-left: 1px solid #999;
      color: var(--code-color);
      padding-left: 20px;
      font-style: italic;
  }

  footer {
      padding: 25px 0;
      text-align: center;
  }

  .title:hover {
      text-decoration: none;
  }

  .title h1 {
      font-size: 1.5em;
  }

  .inline {
      width: auto !important;
  }

  .highlight, .code {
      padding: 1px 15px;
      background-color: var(--code-background-color);
      color: var(--code-color);
      border-radius: 3px;
      margin-block-start: 1em;
      margin-block-end: 1em;
      overflow-x: auto;
  }

   
  ul.blog-posts {
      list-style-type: none;
      padding: unset;
  }

  ul.blog-posts li {
      display: flex;
  }

  ul.blog-posts li span {
      flex: 0 0 130px;
  }

  ul.blog-posts li a:visited {
      color: var(--visited-color);
  }
</style>

</head>

<body>
  <header><a href="/" class="title">
  <h2>Artem Loenko Website</h2>
</a>
<nav><a href="/">Home</a>


<a href="/blog">Blog</a>

</nav>
</header>
  <main>

<h1>Grammarly iOS Keyboard - Unboxing</h1>
<p>
  <i>
    <time datetime='2020-07-26'>
      26 Jul, 2020
    </time>
  </i>
</p>

<content>
  <p><a href="https://www.grammarly.com">Grammarly</a> is a lovely writing assistant. Twenty million people use the tool across the globe according to the statistics available on the site. I use it too. No complaints, it does its job quite well, and I am a happy user. The only thing that always worried me is the <a href="https://www.grammarly.com/keyboard">Grammarly iOS Keyboard</a>. As an iOS engineer, I know how easily you can collect different data, sensitive information, and even do not ask users about the consent. So, let&rsquo;s check what is inside the Grammarly iOS application.</p>
<h2 id="tl-dr">TL;DR</h2>
<ul>
<li>Grammarly iOS uses at least three trackers (Adjust, AppsFlyer, Internal analytics)</li>
<li>Grammarly Keyboard has access to keystrokes, sensitive data, and able to send them over the network</li>
</ul>
<h2 id="frameworks">Frameworks</h2>
<h3 id="facebook">Facebook</h3>
<p>From the <code>Grammarly.ipa</code> file it is clear that they are using Facebook SDKs:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>➜ Grammarly.app_unzip $ find . -iname <span style="color:#4070a0">&#39;*.framework&#39;</span>
</span></span><span style="display:flex;"><span>./Frameworks/FacebookLogin.framework
</span></span><span style="display:flex;"><span>./Frameworks/FBSDKLoginKit.framework
</span></span><span style="display:flex;"><span>./Frameworks/FBSDKCoreKit.framework
</span></span><span style="display:flex;"><span>./Frameworks/FacebookCore.framework
</span></span></code></pre></div><p>Yes, they are using Facebook as a Sign In/Sign Up provider, and Facebook explicitly said that this is the only way to authorise users. From the <a href="https://developers.facebook.com/policy/">Facebook Platform Policy</a>:</p>
<blockquote>
<p>Section 8. Login</p>
<p>Point 2. Native iOS and Android apps that implement Facebook Login must use our official SDKs for login.</p></blockquote>
<p>The only concern here is the way how Facebook treats users and applications that use their SDKs. During 2020, Facebook already damaged a lot of application twice. Check <a href="https://rambo.codes/posts/2020-05-07-the-big-facebook-crash">The big Facebook crash of 2020 and the problem of third-party SDK creep</a> by Guilherme Rambo.</p>
<h3 id="mspell-framework">MSpell framework</h3>
<p>This framework also ships with the application, and it seems that this is the engine the Grammarly uses for spell and grammar checks. Some exported functions from the framework, just as an example:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#40a070">0000000000080808</span> T __ZN10Dictionary21_loadCommonlyConfusedERKNSt3__16vectorINS0_12basic_stringIcNS0_11char_traitsIcEENS0_9allocatorIcEEEENS5_IS7_EEEE
</span></span><span style="display:flex;"><span>0000000000080d54 T __ZN10Dictionary24_loadProfanityDictionaryERKNSt3__16vectorINS0_12basic_stringIcNS0_11char_traitsIcEENS0_9allocatorIcEEEENS5_IS7_EEEE
</span></span><span style="display:flex;"><span><span style="color:#40a070">0000000000082034</span> T __ZN10Dictionary24_loadSensitiveDictionaryERKNSt3__16vectorINS0_12basic_stringIcNS0_11char_traitsIcEENS0_9allocatorIcEEEENS5_IS7_EEEE
</span></span><span style="display:flex;"><span>00000000000822ac T __ZN10Dictionary27isValidCommonlyConfusedPairERKNSt3__112basic_stringIDsNS0_11char_traitsIDsEENS0_9allocatorIDsEEEES8_
</span></span></code></pre></div><h3 id="trackers">Trackers</h3>
<p>No surprises here. There are at least three trackers within the application:</p>
<ol>
<li><a href="https://www.adjust.com">Adjust</a> - Maximize the impact of your mobile marketing!</li>
<li><a href="https://www.appsflyer.com">AppsFlyer</a> - Attribute every app install to a marketing campaign and media source!</li>
<li>Internal tracker located by the <a href="https://f-log-mobile-ios.grammarly.io">https://f-log-mobile-ios.grammarly.io</a> address</li>
</ol>
<p>Also, worth to mention that <a href="https://developer.apple.com/documentation/bundleresources/information%5Fproperty%5Flist/nsapptransportsecurity/nsallowsarbitraryloads">NSAllowsArbitraryLoads</a> is disabled for the application. This is good, at least there is no way to send the data to additional third-party services, etc. According to the documentation:</p>
<blockquote>
<p>A Boolean value indicating whether App Transport Security restrictions are disabled for all network connections. Disabling ATS means that unsecured HTTP connections are allowed.</p></blockquote>
<h2 id="grammarly-custom-keyboard">Grammarly Custom Keyboard</h2>
<p>There is a helpful guide from Apple about custom keyboards - <a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/ExtensibilityPG/CustomKeyboard.html">Designing for User Trust</a>:</p>
<blockquote>
<p>For keyboards, the following three areas are especially important for establishing and maintaining user trust:</p>
<ul>
<li><strong>Safety of keystroke data</strong>. Users want their keystrokes to go to the document or text field they’re typing into, and not to be archived on a server or used for purposes that are not obvious to them.</li>
<li><strong>Appropriate and minimized use of other user data</strong>. If your keyboard employs other user data, such as from Location Services or the Address Book database, the burden is on you to explain and demonstrate the benefit to your users.</li>
<li><strong>Accuracy</strong>. Accuracy in converting input events to text is not a privacy issue per se but it impacts trust: With every word typed, users see the accuracy of your code.</li>
</ul>
<p>To design for trust, first consider whether to request open access. Although open access makes many things possible for a custom keyboard, it also increases your responsibilities.</p></blockquote>
<p>And the Grammarly iOS Keyboard uses the Open Access by default. To demonstrate the difference, this is a table with significant capabilities and restrictions for both modes:</p>
<table>
  <thead>
      <tr>
          <th>Open access off (default)</th>
          <th></th>
          <th>Open access on</th>
          <th></th>
          <th></th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>No shared container with containing app</td>
          <td></td>
          <td>Keyboard can access Location Services and Address Book, with user permission</td>
          <td></td>
          <td></td>
          <td></td>
      </tr>
      <tr>
          <td>No access to file system apart from keyboard’s own container</td>
          <td></td>
          <td>Keyboard and containing app can employ a shared container</td>
          <td></td>
          <td></td>
          <td></td>
      </tr>
      <tr>
          <td>No ability to participate directly or indirectly in iCloud, Game Center, or In-App Purchase</td>
          <td></td>
          <td>Keyboard can send keystrokes and other input events for server-side processing</td>
          <td></td>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<p>So, the Grammarly iOS application has access to a lot of things. And what is more important, is able to send keystrokes to the server.</p>
<h2 id="network-requests">Network requests</h2>
<p>To illustrate the situation with trackers and the Open Access, let&rsquo;s check which requests are initiated when the Grammarly iOS Keyboard is enabled on your iOS device.</p>
<p>When you open the Spotlight and Grammarly is the default keyboard, you see the following sequence of requests:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>https://f-log-mobile-ios.grammarly.io
</span></span><span style="display:flex;"><span>https://gnar.grammarly.com
</span></span><span style="display:flex;"><span>https://data.grammarly.com
</span></span><span style="display:flex;"><span>https://f-log-mobile-ios.grammarly.io
</span></span><span style="display:flex;"><span>https://t.appsflyer.com
</span></span></code></pre></div><p>All the requests made with the <code>GRKeyboardExtension/1.9.2.3 CFNetwork/1185.2 Darwin/20.0.0</code> user-agent. Also, all the end-points use <a href="https://developer.apple.com/documentation/foundation/url%5Floading%5Fsystem/handling%5Fan%5Fauthentication%5Fchallenge/performing%5Fmanual%5Fserver%5Ftrust%5Fauthentication">Certificate Pinning</a>, so, there is no easy way to check the body of the requests. But it is not the point for the article.</p>
<p>To illustrate the point, I recorded a video with network activity. Main takeaways are:</p>
<ul>
<li>Connections to <a href="https://gnar.grammarly.com">https://gnar.grammarly.com</a> and <a href="https://f-log-mobile-ios.grammarly.com">https://f-log-mobile-ios.grammarly.com</a> are active all the way when you use the keyboard</li>
<li>It seems that all the actions (when you select a word to fix) are sent to Adjust</li>
</ul>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/Kz4AhLatdyE?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"></iframe>
    </div>

<p>And yes, the sequence is the same for Safari when you fill in credentials, etc. But do not worry, Apple does not allow to use custom keyboards to fill in passwords. Though, for usernames, phones, emails, etc. Grammarly sends the requests above.</p>
<h2 id="grammarly-privacy-policy">Grammarly Privacy Policy</h2>
<p><a href="https://www.grammarly.com/privacy-policy">Privacy Policy | Grammarly</a> states that:</p>
<ol>
<li>We do not and will not sell your information. We don’t help companies advertise their products to you.</li>
<li>We use a small number of trusted third parties to help provide our products.</li>
</ol>
<p>But on the other hand, there is a <a href="https://www.grammarly.com/privacy-policy#does-grammarly-share-my-information">Does Grammarly share my Information?</a> section that states:</p>
<blockquote>
<p>We only disclose Personal Data to third parties when we have your explicit consent to share your Personal Data.</p></blockquote>
<p>Standard words, usual phrases. I am not a specialist in this field, but I did not find an option to opt-out in the mobile application.</p>
<h2 id="conclusions">Conclusions</h2>
<p>To be clear, I do not think that Grammarly steals your passwords, selling the data, trying to spy on sensitive information intentionally. I am a user of their services for two years and will continue to use it. With one exception - no more Grammarly iOS Keyboard application on my iOS devices. This is too much.</p>
<h2 id="software-i-used">Software I used</h2>
<ul>
<li><a href="http://www.manpagez.com/man/1/nm/osx-10.12.6.php">nm</a> tool - lists the symbols from object files</li>
<li><a href="https://www.manpagez.com/man/1/otool/">otool</a> - displays specified parts of object files or libraries</li>
<li><a href="https://proxyman.io">ProxyMan</a> - Modern and Delightful Web Debugging Proxy</li>
</ul>
<hr>
<p>Checked by Grammarly</p>

</content>
<p>
  
</p>

  </main>
  <footer>
</footer>

    
</body>

</html>
